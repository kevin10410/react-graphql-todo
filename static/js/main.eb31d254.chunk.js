(this["webpackJsonpreact-graphql-todo"]=this["webpackJsonpreact-graphql-todo"]||[]).push([[0],{63:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var a,c,i,s,l=n(4),d=n.n(l),r=n(50),o=n.n(r),b=n(76),u=(n(63),n(24)),j=n(80),p=n(81),m=n(35),h=n(79),O=Object(h.a)(a||(a=Object(m.a)(["\n  {\n    queryTask {\n      id\n      title\n      completed\n    }\n  }\n"]))),f=Object(h.a)(c||(c=Object(m.a)(["\n  mutation addTask($title: String!) {\n    addTask(input: {title: $title, completed: false}) {\n      task {\n        id\n      }\n    }\n  }\n"]))),x=Object(h.a)(i||(i=Object(m.a)(["\n  mutation deleteTask($id: [ID!]) {\n    deleteTask(filter: {id: $id}) {\n      task {\n        id\n      }\n    }\n  }\n"]))),g=Object(h.a)(s||(s=Object(m.a)(["\n  mutation updateTask($id: [ID!], $title: String, $completed: Boolean) {\n    updateTask(input: {filter: {id: $id}, set: {title: $title, completed: $completed}}) {\n      numUids\n    }\n  }\n"]))),k=n(29),v=n(28),N=n(3),y=function(e){return e.error?Object(N.jsx)("p",{children:"Error..."}):e.loading?Object(N.jsx)("h2",{className:"label-wrapper",children:Object(N.jsx)(v.a,{spin:!0,size:"2x",icon:k.a})}):Object(N.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.addTaskHandler()},children:[Object(N.jsx)("h2",{className:"label-wrapper",children:Object(N.jsx)("label",{htmlFor:"new-todo-input",className:"label__lg",children:"What needs to be done?"})}),Object(N.jsx)("input",{className:"input input__lg",id:"new-todo-input",type:"text",name:"text",autoComplete:"off",value:e.name,onChange:function(t){e.inputChangeHandler(t.target.value)}}),Object(N.jsx)("button",{type:"submit",className:"btn btn__primary btn__lg",children:"Add"})]})},C=function(e){var t=Object(l.useState)(""),n=Object(u.a)(t,2),a=n[0],c=n[1],i=Object(l.useState)(!1),s=Object(u.a)(i,2),d=s[0],r=s[1],o=Object(p.a)(x,{onCompleted:function(){e.queryRefetch()}}),b=Object(u.a)(o,2),j=b[0],m=b[1].loading,h=Object(p.a)(g,{onCompleted:function(){e.queryRefetch(),r(!1)}}),O=Object(u.a)(h,2),f=O[0],y=O[1].loading,C=Object(N.jsxs)("form",{className:"stack-small",onSubmit:function(t){t.preventDefault(),e.updateTask(e.id,a),c(""),r(!1)},children:[Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsxs)("label",{className:"todo-label",htmlFor:e.id,children:["New name for ",e.name]}),Object(N.jsx)("input",{className:"todo-text",type:"text",id:e.id,value:a,onChange:function(e){c(e.target.value)}})]}),Object(N.jsxs)("div",{className:"btn-group",children:[Object(N.jsxs)("button",{className:"btn todo-cancel",type:"button",disabled:y,onClick:function(){c(""),r(!1)},children:["Cancel",Object(N.jsxs)("span",{className:"visually-hidden",children:["renaming ",e.name]})]}),Object(N.jsx)("button",{className:"btn btn__primary todo-edit",type:"submit",disabled:y||""===a,onClick:function(){f({variables:{id:e.id,title:a,completed:e.completed}})},children:y?Object(N.jsx)(v.a,{pulse:!0,size:"1x",icon:k.a}):"Save"})]})]}),T=Object(N.jsxs)("div",{className:"stack-small",children:[Object(N.jsxs)("div",{className:"c-cb",children:[Object(N.jsx)("input",{id:e.id,type:"checkbox",disabled:y,checked:e.completed,onChange:function(){y||f({variables:{id:e.id,title:e.name,completed:!e.completed}})}}),Object(N.jsx)("label",{className:"todo-label",htmlFor:e.id,children:e.name}),y&&Object(N.jsx)(v.a,{pulse:!0,size:"lg",icon:k.a})]}),Object(N.jsxs)("div",{className:"btn-group",children:[Object(N.jsxs)("button",{className:"btn",type:"button",disabled:m,onClick:function(){return r(!0)},children:["Edit ",Object(N.jsx)("span",{className:"visually-hidden",children:e.name})]}),Object(N.jsx)("button",{className:"btn btn__danger",type:"button",disabled:m,onClick:function(){j({variables:{id:e.id}})},children:m?Object(N.jsx)(v.a,{pulse:!0,size:"lg",icon:k.a}):"Delete"})]})]});return Object(N.jsx)("li",{className:"todo stack-small",children:d?C:T})},T=function(e){return e.error?Object(N.jsx)("p",{children:"Error..."}):e.loading?Object(N.jsx)("p",{children:"Loading..."}):Object(N.jsx)("ul",{className:"todo-list stack-large stack-exception","aria-labelledby":"list-heading",children:e.tasks.map((function(t){return Object(N.jsx)(C,{id:t.id,name:t.title,completed:t.completed,queryRefetch:e.queryRefetch},t.id)}))})},S=function(e){return Object(N.jsxs)("button",{type:"button",className:"btn toggle-btn","aria-pressed":e.isPressed,onClick:function(){return e.setFilter(e.name)},children:[Object(N.jsx)("span",{className:"visually-hidden",children:"Show "}),Object(N.jsx)("span",{children:e.name}),Object(N.jsx)("span",{className:"visually-hidden",children:" tasks"})]})},_=(n(69),{All:function(){return!0},Active:function(e){return!e.completed},Completed:function(e){return e.completed}}),q=Object.keys(_);var w=function(){var e=Object(j.a)(O),t=e.data,n=e.error,a=e.loading,c=e.refetch,i=Object(p.a)(f,{refetchQueries:[O],onQueryUpdated:function(e){return g(""),e.refetch()}}),s=Object(u.a)(i,2),d=s[0],r=s[1],o=r.error,b=r.loading,m=Object(l.useState)(""),h=Object(u.a)(m,2),x=h[0],g=h[1],k=Object(l.useState)("All"),v=Object(u.a)(k,2),C=v[0],w=v[1],$=null===t||void 0===t?void 0:t.queryTask.filter(_[C]),F=a||n?0:t.queryTask.filter((function(e){return!1===e.completed})).length;return Object(N.jsxs)("div",{className:"todoapp stack-large",children:[Object(N.jsx)("h1",{children:"React GraphQL Todo"}),Object(N.jsx)(y,{name:x,error:o,loading:b,addTaskHandler:function(){d({variables:{title:x}})},inputChangeHandler:function(e){g(e)}}),Object(N.jsx)("div",{className:"filters btn-group stack-exception",children:q.map((function(e){return Object(N.jsx)(S,{name:e,isPressed:e===C,setFilter:w},e)}))}),Object(N.jsxs)("h2",{id:"list-heading",children:[F," tasks remaining"]}),Object(N.jsx)(T,{tasks:$,error:n,loading:a,queryRefetch:c})]})},$=n(77),F=n(78),D=new $.a({uri:"https://blue-surf-400060.us-east-1.aws.cloud.dgraph.io/graphql",cache:new F.a}),R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,83)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),i(e),s(e)}))};o.a.render(Object(N.jsx)(d.a.StrictMode,{children:Object(N.jsx)(b.a,{client:D,children:Object(N.jsx)(w,{})})}),document.getElementById("root")),R()}},[[70,1,2]]]);
//# sourceMappingURL=main.eb31d254.chunk.js.map